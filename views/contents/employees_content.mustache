<style>
    
</style>
<div class="container-fluid">
    <!-- Page Heading -->
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">Employees</h1>
        <div id="add-stocks-button"><a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i>New Employee</i></a></div>
        <div id="return-button" hidden><a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i>Return</i></a></div>
    </div>
    <!-- DataTales Example -->
    <div class="card shadow mb-4" id="card-products">
        <div class="card">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">List</h6>
            </div>
            <div class="card-body" id="employee-list">
                <div class="table-responsive">
                    <table class="table table-bordered table-hover table-striped" id="dataTable" width="100%" cellspacing="0">
                        <thead>
                            <tr>
                                <th>ID Employee</th>
                                <th>Name</th>
                                <th>Position</th>
                                <th>No. Phone</th>
                                <th>Address</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{#surat-masuk}}
                                <tr>
                                    <td>{{tanggalSurat}}</td>
                                    <td>{{judulSurat}}</td>
                                    <td>{{penerima}}</td>
                                    <td>{{pengirim}}</td>
                                    <td>{{perihal}}</td>
                                    <td>{{jenisSurat}}</td>
                                </tr>
                                {{/surat-masuk}}
                            <tr>
                                <td>0435843957346</td>
                                <td>Ryzen 5 5000X</td>
                                <td>85043859347549</td>
                                <td>AMD</td>
                                <td>1032</td>
                                <td>
                                    <div class="dropdown">
                                        <a href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20"><g fill="currentColor"><circle cx="10" cy="15" r="2"/><circle cx="10" cy="10" r="2"/><circle cx="10" cy="5" r="2"/></g></svg>
                                        </a>
                                
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                            <a class="dropdown-item" href="#">Edit</a>
                                            <a class="dropdown-item" href="#">Detail</a>
                                            <!-- Tambahkan opsi dropdown lainnya sesuai kebutuhan -->
                                        </div>
                                        <a href="#">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21H7Zm2-4h2V8H9v9Zm4 0h2V8h-2v9Z"/></svg>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>0435843957346</td>
                                <td>Intel i5 5460U</td>
                                <td>85043859347549</td>
                                <td>Intel</td>
                                <td>980</td>
                                <td>4.153.000</td>
                            </tr>
                            <tr>
                                <td>0435843957346</td>
                                <td>DA PSU 80W Bronze</td>
                                <td>85043859347549</td>
                                <td>Digital Alliance</td>
                                <td>98</td>
                                <td>560.000</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="card-body" id="new-employee-form">
            </div>
        </div>
    </div>
    <div class="card shadow mb-4" id="card-add-stocks" hidden>
        <div class="card">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">New Employee</h6>
            </div>
            <div class="card-body">
                <div class="form-wrap">	
                    <form id="survey-form">
                        <div class="row" id="new-product-input" >
                            <div class="col-md-6">
                                <label id="id-employee-label" for="id-employee">ID Employee</label>
                                <div class="input-group mb-3">
                                    <input type="email" name="id-employee" id="id-employee-form" class="form-control" disabled required>
                                    <div class="input-group-append">
                                      <a href="#" class="input-group-text" id="button-custom-id-employee" onclick="customIdEmployee()">custom</a>
                                      <a href="#" class="input-group-text" id="button-cancel-custom-id-employee" onclick="cancelCustomIdEmployee()" style="display: none;">cancel</a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label id="name-employee-label" for="name">Full Name</label>
                                    <input type="email" name="name" id="name-employee-form" placeholder="EX: Dhimas Arista" class="form-control" required>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label id="number-phone-label" for="numberPhone">Number Phone</label>
                                    <input type="text" name="numberPhone" id="number-phone-form" placeholder="EX: 085157248841" class="form-control" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label id="address-label" for="address">Address</label>
                                    <input type="pengirim" name="address" id="address-form" class="form-control" placeholder="Ex: 68 Main Street, Wellington, 6021, New Zealand"/>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div id="existing-position">
                                    <div class="form-group">
                                        <label id="position-label" for="product_name">Job Position</label>
                                        <select class="form-control scrollable-menu" id="position-name" name="position" onchange="newPositionEmployee()" onfocus="this.size=1;" onchange='this.size=1;'>
                                            <option value="" selected disabled>Select Position</option>
                                            <option value="newPosition">New Position</option>
                                            <option value="product1">Software Engineer</option>
                                            <option value="product2">Data Scientiest</option>
                                            <option value="product3">Cyber Security</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group" id="new-position" style="display: none;">
                                    <label id="pengirim-label" for="new-position">New Position</label>
                                    <div class="input-group mb-3">
                                    <input type="pengirim" name="pengirim" id="new-position-form" class="form-control" placeholder="Ex: Software Engineer"/>
                                    <div class="input-group-append">
                                        <a href="#" class="input-group-text" id="button-cancel-new-position" onclick="cancelNewPositionEmployee()">cancel</a>
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label id="pengirim-label" for="new-position">ID Card | Max: 200kb Type: JPG/JPEG/PNG</label>
                                    <div class="input-group mb-3">
                                        <input type="file" id="id-card-form">
                                        <div class="col-md-6 mt-2">
                                            <div id="delete-idcardform" style="display: none;">
                                                <a href="#"  class="px-1 badge badge-danger" id="button-delete-idcard" onclick="buttonDeleteIdCardFile()">
                                                    <i>
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21H7Zm2-4h2V8H9v9Zm4 0h2V8h-2v9Z"/></svg>
                                                    </i>
                                                </a>
                                                <span id="idcard-filename"></span>
                                            </div>
                                        </div>
                                      </div>
                                    </div>
                            </div>
                            <script>
                                const idCardForm = document.getElementById("id-card-form");  // Part of 7 Input Form
                                const deleteIdCardForm = document.getElementById("delete-idcardform");
                                const buttonDeleteIdCard = document.getElementById("button-delete-idcard");
                                const idCardFilename = document.getElementById("idcard-filename");
                                const imagesTypes = ["image/jpg", "image/jpeg", "image/png"];
                                idCardForm.addEventListener("change", () => {
                                    // checkFileType(idCardForm, imagesTypes, "Change the Image format", idCardForm); // script.js
                                    // checkFileSize(idCardForm); // script.js
                                    idCardFilename.textContent = idCardForm.files[0]["name"]
                                    deleteIdCardForm.style.display = "block";
                                    idCardForm.style.display = "none";
                                });
                                function buttonDeleteIdCardFile() {
                                    toastr.success("File Deleted.", "success");
                                    deleteIdCardForm.style.display = "none";
                                    idCardForm.style.display = "block";
                                    idCardFilename.textContent = null;
                                    idCardForm.value = "";
                                }
                            </script>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-check mx-4">
                                    <input id="add-tobe-user-form" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                      Add to be User
                                    </label>
                                  </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-2 my-4">
                                <button type="submit" id="submit" class="btn btn-primary btn-block">Upload</button>
                            </div>
                        </div>

                    </form>
                </div>	
            </div>
        </div>
    </div>
    <script>
        // 7 Input Form
        const idEmployeeForm = document.getElementById("id-employee-form");
        const nameEmployeeForm = document.getElementById("name-employee-form");
        const numberPhoneForm = document.getElementById("number-phone-form");
        const addressForm = document.getElementById("address-form");
        const positionselect = document.getElementById("position-name");
        const addToBeUserForm = document.getElementById("add-tobe-user-form");

        // Mengambil id employee terakhir di db
        const lastIdEmploye = 100293;
        const newIdEmployee = lastIdEmploye + 1; 
        idEmployeeForm.value = newIdEmployee; // Menambahkan id dengan kalkulasi id terakhir + 1

        const buttonCustomIdEmployee = document.getElementById("button-custom-id-employee");
        const buttonCancelCustomIdEmployee = document.getElementById("button-cancel-custom-id-employee");
        function customIdEmployee(){
            idEmployeeForm.value = newIdEmployee;
            idEmployeeForm.removeAttribute("disabled");
            buttonCustomIdEmployee.style.display = "none";
            buttonCancelCustomIdEmployee.style.display = "block";
        }
        function cancelCustomIdEmployee() {
            idEmployeeForm.value = newIdEmployee;
            idEmployeeForm.setAttribute("disabled", true);
            buttonCustomIdEmployee.style.display = "block";
            buttonCancelCustomIdEmployee.style.display = "none";
        }

        const existingPosition = document.getElementById("existing-position");
        const newPosition = document.getElementById("new-position");
        const newPositionForm = document.getElementById("new-position-form");
        function newPositionEmployee() {
            if (positionselect.value = "newPosition") {
                existingPosition.style.display = "none";
                newPosition.style.display = "block"
            } else {
                existingPosition.style.display = "block";
                newPosition.style.display = "none"
            }
        }

        function cancelNewPositionEmployee() {
            positionselect.selectedIndex = 0;
            existingPosition.style.display = "block";
            newPosition.style.display = "none";
            newPositionForm.value = null;
        }
    </script>

        <!-- <script>
            function showTab(tabId) {
                // Sembunyikan semua card body
                var cardBodies = document.getElementsByClassName('card-body');
                for (var i = 0; i < cardBodies.length; i++) {
                    cardBodies[i].style.display = 'none';
                }
        
                // Hapus kelas "active" dari semua tautan
                var navLinks = document.getElementsByClassName('nav-link');
                for (var j = 0; j < navLinks.length; j++) {
                    navLinks[j].classList.remove('active');
                }
        
                // Tampilkan card body dengan id yang sesuai
                document.getElementById(tabId).style.display = 'block';
        
                // Tambahkan kelas "active" pada tautan yang diklik
                var clickedLink = event.currentTarget;
                clickedLink.classList.add('active');
            }
        </script>       -->

</div>
<script>
    // Card Body Handlers
    const cardProducts = document.getElementById("card-products");
    const cardAddStocks = document.getElementById("card-add-stocks");
    const addStocksButton = document.getElementById("add-stocks-button")
    // const inventoryButton = document.getElementById("inventory-button");
    const returnButton = document.getElementById("return-button")

    addStocksButton.addEventListener("click", () => {
        cardAddStocks.removeAttribute("hidden");
        returnButton.removeAttribute("hidden");
        addStocksButton.setAttribute("hidden", true);
        cardProducts.setAttribute("hidden",true)
    });
    /*
        7 Input Form
        - idEmployeeForm 
        - nameEmployeeForm 
        - numberPhoneForm 
        - addressForm
        - positionselect
        - idCardForm
        - addToBeUserForm
    */ 
    
    // Event akan di panggil ketika form tidak kosong
    returnButton.addEventListener("click", () => {
        if (nameEmployeeForm !== "" || numberPhoneForm !== "" || addressForm !== "") {
            Swal.fire({
            title: "Are you sure?",
            text: "You won't be able to revert this!",
            icon: "warning",
            showCancelButton: true,
            confirmButtonColor: "#3085d6",
            cancelButtonColor: "#d33",
            confirmButtonText: "Yes, cancel it!"
        }).then((result) => {
            if (result.isConfirmed) {
                cardAddStocks.setAttribute("hidden", true);
                returnButton.setAttribute("hidden", true);
                addStocksButton.removeAttribute("hidden");
                cardProducts.removeAttribute("hidden");

                // Mengosongkan 7 Input Form
                cancelCustomIdEmployee(); // ID Employee Form
                nameEmployeeForm.value = null;
                numberPhoneForm.value = null;
                addressForm.value = null;
                cancelNewPositionEmployee(); // Position Form
                buttonDeleteIdCardFile(); // ID Card File
                addToBeUserForm.checked = false;
            }
        });
        }
    });
</script>